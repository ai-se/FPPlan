\newpage
\section{Introduction}
Data mining tools have been succesfully applied to many applications in software engineering; e.g.~\citep{czer11, ostrand04, Menzies2007a, turhan11, koc11b, export:208800, theisen15}. 
Despite these successes,  current
software analytic tools have certain drawbacks. At a workshop on ``Actionable Analytics'' at the 2015 IEEE conference on
Automated Software Engineering, 
business users were vocal in their complaints about analytics~\citep{hihn15}.
``Those tools tell us \textit{what is}, '' said one business user, ``But they don't tell us \textit{what to do}''.
Hence we seek new tools that offer  guidance on ``what to do'' within a specific project. 

We seek such new tools since  current   analytics tools are mostly \textit{prediction} algorithms such as support vector machines~\citep{cortes95}, naive Bayes classifiers~\citep{lessmann08}, logistic regression~\citep{lessmann08}. For example, defect prediction tools report what combinations of software project features predict for some dependent variable (such as the number of defects). Note that this is a different task to \textit{planning}, which answers the question: what to {\em change} in order to {\em improve} quality.
	
More specifically, we seek plans that propose {\em least} changes while most \textit{improving} software \textit{quality} where:
\bi
\item \textit{Quality} = defects reported by the development team; 
\item \textit{Improvement} = lowered likelihood of future defects.
\ei
This paper advocates the use of the {\em bellwether effect}~\citep{krishna16, krishna17a, mensah2018investigating} to generate plans. This effect states that:
\begin{quote}
  \textit{`` \ldots When a community of programmers work on a set of projects, then within that community there exists one exemplary project, called the bellwether\footnote{According to the Oxford English Dictionary, the bellwether is the leading sheep of a flock, with a bell on its neck.}, which can best define quality predictors for the other projects \ldots ''}
\end{quote}
Utilizing the bellwether effect, we propose a cross-project variant of our XTREE contrast set learner called BELLTREE where
\begin{center}
  \textit{BELLTREE} = \textit{Bellwether}$+$\textit{XTREE}
\end{center}
BELLTREE searches for an exemplar project, or \textit{bellwether}~\citep{krishna17a}, to construct plans from other projects. As shown by
the experiments of this paper, these plans can be remarkably effective. In 10 open-source JAVA systems, hundreds of defects could potentially be reduced in sections of the code that followed the plans generated by our planners. Further, we show that planning is possible across projects, which is particularly useful when there are no historical logs available for a particular project to generate plans from.

The structure of this paper is as follows: the rest of this section highlights the key contributions of this work(\tion{contrib}), and relationships between this work and our prior work (\tion{our_prior}). In \tion{rqs}, we introduce the research questions asked in this paper and briefly discuss our findings. In \tion{motivate} we discuss the background which include some of related work in the area. There, in \tion{planners}, the  notion of planning and the different kinds of planners studied here. \tion{prelim} contains the research methods, datasets, and evaluation strategy. In \tion{results} we answer the research questions. In \tion{discuss} we discuss the implications of our findings. Finally, \tion{threats} and \tion{future} present threats to validity and conclusions respectively.


\subsection{Contributions}
\label{sect:contrib}
The key contributions of this work are:

\textit{1. New kinds of software analytics techniques:} This work combines planning~\citep{krishna17a} with cross-project learning using bellwethers~\citep{krishna16}. 
Note that
our previous work ~\citep{krishna16, krishna17b} explored prediction and not the planning as described here. Also, previously, our planners~\citep{krishna17a} only explored within-project problems (but not cross-project). 

\textit{2. Compelling results about planning:} Our results show that planning is  successful in producing actions that can reduce the number of defects; Further, we see that plans learned on one project can be translated to other projects.

\textit{3. More evidence of generality of bellwethers:}  Bellwethers were
originally  used in the context of prediction~\citep{krishna16} and have been shown to work for (i)~defect prediction, (ii)~effort estimation, (iii)~issues close time, and (iv)~detecting code smells~\citep{krishna17b}. This paper extends those results to show that bellwethers can also be used from cross-project planning. This is an important result of much significance since, it suggests that general conclusions about SE can be easily found (with bellwethers).

\textit{4. An open source reproduction package containing all our scripts and data.} For readers interested in replicating this work, kindly see \url{https://git.io/fNcYY}.
 

\subsection{Post Hoc Ergo Propter Hoc?}\label{sect:hoc}

The Latin expression {\em post hoc ergo propter hoc}
 translates to ``after this, therefore because of this''.
This Latin expression is the name given to
the logical fallacy that
``since event Y followed event X, event Y must have been caused by event X''.
This can be a fallacy since another event Z may have influenced Y.

This concern was very
present in our minds as we developed this paper.
Prior to this paper, it was an open issue if 
XTREE/BELLTREE's plans  work on future data. Accordingly
we carefully evaluated if knowledge of past changes were  useful for 
planning future changes.
The details of that evaluation criteria are offered later in this paper
(see ``The {\ktest}'' of \S\ref{sect:ktest}).  For now, all we need say is that:
\bi
\item
We sorted our data via its associated timestamps
into {\em older}, {\em newer}, and {\em latest}
(later in this paper we will call these {\em train, test, validate}, respectively).
We say that the 
{\em older} plans are those learned from   the  {\em older data}. 
\item
If developers of   {\em newer} code knew about  the  older plans,
then they would  apply them
either (a)~{\em very little}, (b)~{\em some}, (c)~{\em more}; or (d)~{\em mostly}. 
\item
We also note that  it is possible to  automatically identify
each of those four kinds developers  as those whose changes  
between {\em newer} and {\em latest}
overlap
with  the older plans  (a)~{\em very little}, (b)~{\em some}, (c)~{\em more}; or (d)~{\em mostly}. 
\ei
The experiments of this paper show that,
 when we explored real world data from
from the {\em newer} and {\em latest} versions, then:
\bi
\item If projects changes overlap  {\em very little } 
with  older plans, then   defects are not reduced.
\item But if projects changes {\em mostly} overlap   with   older plans, then   defect  are  much lower.
\ei
To be clear,   XTREE/BELLTREE {\em does not} generate causal
models for software defects. However, our results  suggest that it can be very useful to follow
our plans.

\subsection{Relationship to Prior Work}
\label{sect:our_prior}
As for the connections to prior research, 
as shown in \fig{analytics}, originally in 2007 we explored software quality prediction in the context of training and testing within the same software project~\citep{menzies07}. After that we found ways in 2009 to train these predictors on some projects, then test them on others~\citep{turhan09}. Subsequent work in 2016 found that bellwethers were a simpler and effective way to implement transfer learning~\citep{krishna16}, which worked well for a wide range of software analytics tasks~\citep{krishna17b}. 

\input{contributions}

\respto{3-A} {\color{steel} In the area of planning, we introduced the possibility of using XTREE for planning as a short report at a workshop on \enquote{Actionable Analytics} in ASE `15~\citep{krishna15}, we followed this up a slightly more detailed report in the IST journal~\citep{krishna2017less}. These initial findings on XTREE were also presented at the IEEE ASE'17 Doctoral Symposium~\citep{krishna2017b}. The panel highlighted the following limitations:
\bi[wide=0pt]
\item \textit{Inadequate Validation.} Our initial report uses \textit{defect predictors} to assess    
plan effectiveness. However, the  performance of those defect prediction schemes were limited to at most 65\% (as shown in Figure 5 of~\citep{krishna2017less}).   
\item \textit{Smaller Datasets.} Due to the limited predictive performance of the defect predictors used in the previous studies, the results were reported on only five projects.
\item \textit{Metric interdepencies ignored.} The previous variant of XTREE also did not take into consideration the interaction between individual metrics. 
\ei
Accordingly, in this paper we present a updated variant of XTREE, including new experiments on more projects.

Further, this current article     addresses a much harder question: can plans be generated from one project and applied to the another? In answering this, we have endeavored to avoid our mistakes from the past, e.g., the use of overly complex methodologies to achieve a relatively simpler goal. Accordingly, this work experiments with bellwethers to see if this simple method works for planning as with prediction.} 

One assumption across much of our work is the \textit{homogeneity} of the learning, i.e., although the training and testing data may belong to different projects, they share the same attributes~\citep{krishna16, krishna17a, krishna17b, menzies07, turhan09}. Since that is not always the case, we have recently been exploring heterogeneous learning where attribute names may change between the training and test sets~\citep{fu18}. Heterogeneous planning is primary focus of our future work.
\newpage